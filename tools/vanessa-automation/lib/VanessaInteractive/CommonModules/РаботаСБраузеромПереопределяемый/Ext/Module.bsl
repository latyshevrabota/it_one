#Область ПрограммныйИнтерфейс

Процедура ОбработатьСообщенияОтВнешнегоСайта(Сообщение, ДополнительныеПараметры) Экспорт
	
	// Демонстрация начало
	Если Сообщение.Данные = "StartDemo" Тогда
		
		ОчиститьСообщения();
		
		МассивШагов = Новый Массив;
		
		ПараметрыСообщения = РаботаСБраузером.НовыйПараметрыEnjoyHint();
		ПараметрыСообщения.title = "СообщениеВнешнемуСайту";
		ПараметрыСообщения.event    = "click";
		ПараметрыСообщения.description = "Вас приветствует демонстрационная версия механизма общения с Вэб Клиентом. Для продолжения нажмите на кнопку.";
		
		МассивШагов.Добавить(ПараметрыСообщения);
		
		ДополнитьШаги(МассивШагов);
		
		РаботаСБраузером.СообщениеВнешнемуСайту(МассивШагов);
		
	Иначе
		Если СтрНачинаетсяС(Сообщение.Данные, "{") Тогда
			
			ДанныеОтвета = РаботаСДанными.ПрочитатьJSONВДанные(Сообщение.Данные);
			Оповестить("ОбработатьСообщенияОтВнешнегоСайта", ДанныеОтвета);
			// Показать енджой хинт по координатам.
			
		КонецЕсли;
	КонецЕсли;
	// Демонстрация конец
	
КонецПроцедуры


#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Процедура ДополнитьШаги(МассивШагов)
	
	ПараметрыСообщения = РаботаСБраузером.НовыйПараметрыEnjoyHint();
	ПараметрыСообщения.title = "ВоспроизвестиЗвук";
	ПараметрыСообщения.showPrev = Истина;
	ПараметрыСообщения.event    = "click";
	ПараметрыСообщения.description = "Эта команда передает звуковой файл из 1С в браузер и воспроизводит его.";
	МассивШагов.Добавить(ПараметрыСообщения);
	
	ПараметрыСообщения = РаботаСБраузером.НовыйПараметрыEnjoyHint();
	ПараметрыСообщения.title = "ОстановитьЗвук";
	ПараметрыСообщения.showPrev = Истина;
	ПараметрыСообщения.event    = "click";
	ПараметрыСообщения.description = "Эта команда останавливает проигрываение звукового файла. Для продолжения нажмите на нее.";
	МассивШагов.Добавить(ПараметрыСообщения);
	
	ПараметрыСообщения = РаботаСБраузером.НовыйПараметрыEnjoyHint();
	ПараметрыСообщения.title = "ОтветНаВопрос";
	ПараметрыСообщения.showPrev = Истина;
	ПараметрыСообщения.description = "Введите ответ на вопрос: 2*2 = ?";
	МассивШагов.Добавить(ПараметрыСообщения);
	
КонецПроцедуры

#КонецОбласти

